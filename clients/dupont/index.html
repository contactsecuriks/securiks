<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Espace client ‚Äì Total caisse</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body {
  font-family: Arial, sans-serif;
  background: #111;
  color: #fff;
  margin: 0;
  padding: 0;
}
.login, .content {
  max-width: 420px;
  margin: 80px auto;
  background: #1e1e1e;
  padding: 25px;
  border-radius: 10px;
  box-shadow: 0 0 15px rgba(0,0,0,0.5);
}
h1, h2 {
  text-align: center;
  color: #4CAF50;
}
input, button {
  width: 100%;
  padding: 12px;
  margin-top: 12px;
  border-radius: 6px;
  border: none;
  font-size: 16px;
}
button {
  background: #4CAF50;
  color: #000;
  font-weight: bold;
  cursor: pointer;
}
button:hover {
  opacity: 0.9;
}
.error {
  color: #ff5252;
  margin-top: 10px;
  text-align: center;
}
.value {
  font-size: 1.8em;
  margin: 10px 0;
  text-align: center;
}
.small {
  font-size: 0.85em;
  opacity: 0.7;
  text-align: center;
}
.logout {
  margin-top: 20px;
  background: #ff5252;
}
.content { display: none; }
</style>
</head>

<body>

<!-- LOGIN -->
<div class="login" id="loginBox">
  <h2>Acc√®s s√©curis√©</h2>
  <input type="text" id="user" placeholder="Identifiant">
  <input type="password" id="pass" placeholder="Mot de passe">
  <button onclick="login()">Connexion</button>
  <div class="error" id="error"></div>
</div>

<!-- CONTENU -->
<div class="content" id="contentBox">
  <h1>Total caisse</h1>

  <!-- üîΩ DONN√âES G√âN√âR√âES PAR LE SCRIPT CAISSE -->
  <div class="value">TOTAL : 1 542 ‚Ç¨</div>
  <div class="value">CB : 1 120 ‚Ç¨</div>
  <div class="value">ESP√àCES : 422 ‚Ç¨</div>

  <div class="small">Derni√®re mise √† jour : 06/02/2026 23:55</div>

  <button class="logout" onclick="logout()">D√©connexion</button>
</div>

<script>
// ================= IDENTIFIANTS =================
const ADMIN = "admin";

/*
  Mot de passe r√©el (exemple) : dupont2026
  Hash SHA-256 correspondant :
*/
const PASSWORD_HASH = "9af15b336e6a9619928537df30b2e6a2376569fcf9d7e773eccede65606529a0";

// ================= SHA-256 =================
async function sha256(text) {
  const encoder = new TextEncoder();
  const data = encoder.encode(text);
  const hashBuffer = await crypto.subtle.digest("SHA-256", data);
  return Array.from(new Uint8Array(hashBuffer))
    .map(b => b.toString(16).padStart(2, "0"))
    .join("");
}

// ================= LOGIN =================
async function login() {
  const u = document.getElementById("user").value;
  const p = document.getElementById("pass").value;
  const error = document.getElementById("error");

  const hash = await sha256(p);

  if (u === ADMIN && hash === PASSWORD_HASH) {
    sessionStorage.setItem("auth", "ok");
    showContent();
  } else {
    error.innerText = "Identifiants incorrects";
  }
}

// ================= LOGOUT =================
function logout() {
  sessionStorage.removeItem("auth");
  location.reload();
}

// ================= AFFICHAGE =================
function showContent() {
  document.getElementById("loginBox").style.display = "none";
  document.getElementById("contentBox").style.display = "block";
}

// ================= AUTO-CONNEXION =================
if (sessionStorage.getItem("auth") === "ok") {
  showContent();
}
</script>

</body>
</html>

